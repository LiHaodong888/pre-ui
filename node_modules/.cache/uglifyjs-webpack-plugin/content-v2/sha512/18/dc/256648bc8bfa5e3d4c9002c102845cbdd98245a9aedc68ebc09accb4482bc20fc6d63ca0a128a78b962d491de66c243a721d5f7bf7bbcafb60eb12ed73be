{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-5bf2\"],{\"/gXl\":function(t,e,n){\"use strict\";n.d(e,\"d\",function(){return r}),n.d(e,\"b\",function(){return o}),n.d(e,\"c\",function(){return i}),n.d(e,\"e\",function(){return l}),n.d(e,\"a\",function(){return s});var a=n(\"t3Un\"),r=function(t){return Object(a.a)({url:\"/dept\",method:\"post\",data:t})},o=function(){return Object(a.a)({url:\"/dept\",method:\"get\"})},i=function(){return Object(a.a)({url:\"/dept/tree\",method:\"get\"})},l=function(t){return Object(a.a)({url:\"/dept\",method:\"put\",data:t})},s=function(t){return Object(a.a)({url:\"/dept/\"+t,method:\"delete\"})}},Oc90:function(t,e,n){\"use strict\";n(\"Qyje\")},UObH:function(t,e,n){\"use strict\";var a=n(\"dFiR\");n.n(a).a},XVEU:function(t,e,n){\"use strict\";n.d(e,\"d\",function(){return r}),n.d(e,\"b\",function(){return o}),n.d(e,\"a\",function(){return i}),n.d(e,\"e\",function(){return l}),n.d(e,\"c\",function(){return s});var a=n(\"t3Un\");function r(t){return Object(a.a)({url:\"/role\",method:\"get\",params:t})}function o(t){return Object(a.a)({url:\"/role/\"+t,method:\"delete\"})}function i(t){return Object(a.a)({url:\"/role\",method:\"post\",data:t})}function l(t){return Object(a.a)({url:\"role\",method:\"put\",data:t})}function s(t){return Object(a.a)({url:\"/role/findRoleMenus/\"+t,method:\"get\"})}},dFiR:function(t,e,n){},dv4G:function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return r}),n.d(e,\"c\",function(){return o}),n.d(e,\"e\",function(){return i}),n.d(e,\"b\",function(){return l}),n.d(e,\"d\",function(){return s});var a=n(\"t3Un\");function r(t){return Object(a.a)({url:\"/job\",method:\"post\",data:t})}function o(t){return Object(a.a)({url:\"/job\",method:\"get\",params:t})}function i(t){return Object(a.a)({url:\"/job\",method:\"put\",data:t})}function l(t){return Object(a.a)({url:\"/job/\"+t,method:\"delete\"})}function s(t){return Object(a.a)({url:\"/job/\"+t,method:\"get\"})}},\"j/dK\":function(t,e,n){\"use strict\";n.r(e);var a=n(\"P2sY\"),r=n.n(a),o=n(\"wk8/\"),i=n(\"dv4G\"),l=n(\"XVEU\"),s=n(\"/gXl\"),d=(n(\"Oc90\"),n(\"nOKp\")),u=n(\"14Xm\"),c=n.n(u),m=n(\"4d7F\"),f=n.n(m),p=n(\"D3Ub\"),h=n.n(p),b=n(\"twU4\"),g={data:function(){return{dicts:[]}},methods:{getDict:function(t){var e=this;return h()(c.a.mark(function n(){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt(\"return\",new f.a(function(n,a){var r=new URLSearchParams;r.append(\"name\",t),Object(b.d)(r).then(function(t){console.log(t),e.dicts=t.data.data,n(t)}).catch(function(t){a(t)})}));case 1:case\"end\":return n.stop()}},n,e)}))()}}},v={components:{PopupTreeInput:d.a},mixins:[g],data:function(){return{tableData:[],roles:[],jobs:[],operation:!1,keyword:\"\",currentPage:1,pageSize:10,total:0,deptId:0,dialogFormVisible:!1,formLabelWidth:\"120px\",dataForm:{username:\"\",avatar:\"\",deptId:1,deptName:\"\",jobId:0,email:\"lihaodongmail@163.com\",phone:\"17521296869\",lockFlag:\"0\",roleList:[]},deptData:[],deptTreeProps:{label:\"name\",children:\"children\"},value5:\"100\",filterText:\"\",loading:!1,jobName:\"\"}},created:function(){this.adminList(),this.findUserRoles(),this.findDeptTree(),this.getDict(\"user_status\")},methods:{findUserRoles:function(){var t=this,e=new URLSearchParams;e.append(\"roleName\",\"\"),Object(l.d)(e).then(function(e){t.roles=e.data.data})},findDeptTree:function(){var t=this;Object(s.b)().then(function(e){t.deptData=e.data.data})},deptTreeCurrentChangeHandle:function(t){this.dataForm.deptId=t.deptId,this.dataForm.deptName=t.name,this.getJobs(t.deptId)},getJobs:function(t){var e=this;Object(i.d)(t).then(function(t){e.jobs=t.data.data})},adminList:function(){var t=this;this.loading=!0;var e=new URLSearchParams;e.append(\"current\",this.currentPage),e.append(\"size\",this.pageSize),e.append(\"deptId\",this.deptId),e.append(\"username\",this.keyword),Object(o.e)(e).then(function(e){t.loading=!1,t.tableData=e.data.data.records,t.total=e.data.data.total,console.log(e.data.data.records)})},handleFind:function(){this.adminList()},handleAdd:function(){this.dialogFormVisible=!0,this.operation=!0,this.dataForm={username:\"\",deptId:1,deptName:\"\",jobId:\"\",email:\"lihaodongmail@163.com\",phone:\"17521296869\",lockFlag:\"0\",roleList:[]}},handleEdit:function(t){this.dialogFormVisible=!0,this.operation=!1,this.dataForm=r()({},t),this.dataForm.jobId=t.jobId;for(var e=[],n=0,a=t.roleList.length;n<a;n++)e.push(t.roleList[n].roleId);this.dataForm.roleList=e},handRest:function(t){var e=this,n=this;this.$confirm(\"此操作将会将该用户密码重置, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(o.g)(t.userId).then(function(t){200===t.data.code?n.$message({type:\"success\",message:\"重置密码成功\"}):n.$message({type:\"error\",message:t.data.msg})})}).catch(function(){e.$message({type:\"info\",message:\"已取消删除\"})})},handleDelete:function(t){var e=this,n=this;this.$confirm(\"此操作将该管理员删除, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){Object(o.b)(t.userId).then(function(t){200===t.data.code?(e.$message({type:\"success\",message:\"操作成功\"}),n.adminList()):e.$message({type:\"error\",message:t.data.msg})})}).catch(function(){e.$message({type:\"info\",message:\"已取消删除\"})})},handleCurrentChange:function(t){this.currentPage=t,this.adminList()},handleNodeClick:function(t){this.deptId=0===t.deptId?0:t.deptId,this.adminList()},submitForm:function(){for(var t=this,e=[],n=0,a=this.dataForm.roleList.length;n<a;n++)e.push(this.dataForm.roleList[n]);this.dataForm.roleList=e,this.operation?Object(o.a)(this.dataForm).then(function(e){200===e.data.code?(t.$message({type:\"success\",message:\"操作成功\"}),t.dialogFormVisible=!1,t.adminList()):t.$message({type:\"error\",message:e.data.msg})}):Object(o.c)(this.dataForm).then(function(e){200===e.data.code?(t.$message({type:\"success\",message:\"操作成功\"}),t.dialogFormVisible=!1,t.adminList()):t.$message({type:\"error\",message:e.data.msg})})}}},_=(n(\"UObH\"),n(\"KHd+\")),j=Object(_.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"app-container\"},[n(\"el-row\",{attrs:{gutter:20}},[n(\"el-col\",{attrs:{xs:24,sm:24,md:4,lg:4,xl:4}},[n(\"div\",{staticClass:\"head-container\"},[n(\"el-input\",{staticClass:\"filter-item\",staticStyle:{\"margin-bottom\":\"20px\"},attrs:{placeholder:\"输入部门名称搜索\",size:\"small\",\"prefix-icon\":\"el-icon-search\"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:\"filterText\"}})],1),t._v(\" \"),n(\"el-tree\",{attrs:{data:t.deptData,props:t.deptTreeProps,\"expand-on-click-node\":!1,\"default-expand-all\":\"\"},on:{\"node-click\":t.handleNodeClick}})],1),t._v(\" \"),n(\"el-col\",{attrs:{xs:24,sm:24,md:20,lg:20,xl:20}},[n(\"div\",{staticClass:\"filter-container\"},[n(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{clearable:\"\",size:\"small\",placeholder:\"请输入用户名\"},nativeOn:{keyup:function(e){return\"button\"in e||!t._k(e.keyCode,\"enter\",13,e.key,\"Enter\")?t.handleFind(e):null}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:\"keyword\"}}),t._v(\" \"),n(\"el-button\",{staticClass:\"filter-item\",attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:t.handleFind}},[t._v(\"查找\\n        \")]),t._v(\" \"),n(\"el-button\",{staticClass:\"filter-item\",attrs:{type:\"primary\",size:\"mini\",icon:\"el-icon-plus\"},on:{click:t.handleAdd}},[t._v(\"添加\\n        \")])],1),t._v(\" \"),n(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{data:t.tableData,size:\"mini\"}},[n(\"el-table-column\",{attrs:{label:\"序号\",width:\"60\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"span\",[t._v(t._s(e.$index+1))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"用户名\",width:\"80\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"span\",[t._v(t._s(e.row.username))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"手机号\",width:\"100\",align:\"center\",sortable:\"\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"span\",[t._v(t._s(e.row.phone))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"邮箱\",width:\"160\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"span\",[t._v(t._s(e.row.email))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"部门 / 岗位\",width:\"130\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"div\",[t._v(t._s(e.row.deptName)+\" / \"+t._s(e.row.jobName))])]}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"拥有角色\",width:\"200\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return t._l(e.row.roleList,function(e){return n(\"el-tag\",{key:e.roleId,staticStyle:{\"margin-right\":\"5px\"},attrs:{type:\"success\"}},[t._v(\"\\n              \"+t._s(e.roleName)+\"\\n            \")])})}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"状态\",width:\"70\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return t._l(t.dicts,function(a){return n(\"div\",{key:a.id},[e.row.lockFlag.toString()===a.value?n(\"el-tag\",{attrs:{type:e.row.lockFlag?\"\":\"info\"}},[t._v(t._s(a.label)+\"\\n              \")]):t._e()],1)})}}])}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"操作\",fixed:\"right\",\"min-width\":\"120\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"el-button\",{attrs:{size:\"mini\",icon:\"el-icon-edit\"},on:{click:function(n){t.handleEdit(e.row)}}},[t._v(\"编辑\")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"danger\",size:\"mini\",icon:\"el-icon-delete\"},on:{click:function(n){t.handleDelete(e.row)}}},[t._v(\"删除\")])]}}])})],1),t._v(\" \"),n(\"div\",{staticClass:\"block\"},[n(\"el-pagination\",{attrs:{\"current-page\":t.currentPage,\"page-size\":t.pageSize,layout:\"total, prev, pager, next, jumper\",total:t.total},on:{\"update:currentPage\":function(e){t.currentPage=e},\"current-change\":t.handleCurrentChange}})],1),t._v(\" \"),n(\"el-dialog\",{attrs:{title:t.operation?\"新增用户\":\"编辑用户\",visible:t.dialogFormVisible,center:\"\"},on:{\"update:visible\":function(e){t.dialogFormVisible=e}}},[n(\"el-form\",{attrs:{model:t.dataForm,\"label-width\":\"80px\",size:\"small\",\"label-position\":\"right\"}},[n(\"el-form-item\",{attrs:{label:\"用户名\",\"label-width\":t.formLabelWidth,required:\"\"}},[n(\"el-input\",{attrs:{\"auto-complete\":\"off\",placeholder:\"请输入用户名\"},model:{value:t.dataForm.username,callback:function(e){t.$set(t.dataForm,\"username\",e)},expression:\"dataForm.username\"}})],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"邮箱\",\"label-width\":t.formLabelWidth}},[n(\"el-input\",{attrs:{\"auto-complete\":\"off\",placeholder:\"请输入邮箱\"},model:{value:t.dataForm.email,callback:function(e){t.$set(t.dataForm,\"email\",e)},expression:\"dataForm.email\"}})],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"手机\",\"label-width\":t.formLabelWidth}},[n(\"el-input\",{attrs:{\"auto-complete\":\"off\",placeholder:\"请输入手机\"},model:{value:t.dataForm.phone,callback:function(e){t.$set(t.dataForm,\"phone\",e)},expression:\"dataForm.phone\"}})],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"部门\",\"label-width\":t.formLabelWidth}},[n(\"popup-tree-input\",{attrs:{data:t.deptData,props:t.deptTreeProps,prop:t.dataForm.deptName,\"node-key\":\"\"+t.dataForm.deptId,\"current-change-handle\":t.deptTreeCurrentChangeHandle}})],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"岗位\",\"label-width\":t.formLabelWidth}},[n(\"el-select\",{staticStyle:{width:\"100%\"},attrs:{placeholder:\"请先选择部门\"},model:{value:t.dataForm.jobId,callback:function(e){t.$set(t.dataForm,\"jobId\",e)},expression:\"dataForm.jobId\"}},t._l(t.jobs,function(t,e){return n(\"el-option\",{key:\"\"+e,attrs:{label:t.jobName,value:t.id}})}))],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"角色\",prop:\"userRoles\",\"label-width\":\"120px\"}},[n(\"el-select\",{staticStyle:{width:\"100%\"},attrs:{multiple:\"\",placeholder:\"请选择\"},model:{value:t.dataForm.roleList,callback:function(e){t.$set(t.dataForm,\"roleList\",e)},expression:\"dataForm.roleList\"}},t._l(t.roles,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.roleName,value:t.roleId}})}))],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"状态\",prop:\"lockFlag\",\"label-width\":\"120px\"}},[n(\"el-switch\",{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-text\":\"正常\",\"active-value\":\"0\",\"inactive-text\":\"锁定\",\"inactive-value\":\"9\"},model:{value:t.dataForm.lockFlag,callback:function(e){t.$set(t.dataForm,\"lockFlag\",e)},expression:\"dataForm.lockFlag\"}})],1)],1),t._v(\" \"),n(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(\"取 消\")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.submitForm}},[t._v(\"确 定\")])],1)],1)],1)],1)],1)},[],!1,null,null,null);j.options.__file=\"user.vue\";e.default=j.exports},twU4:function(t,e,n){\"use strict\";n.d(e,\"e\",function(){return r}),n.d(e,\"c\",function(){return o}),n.d(e,\"d\",function(){return i}),n.d(e,\"f\",function(){return l}),n.d(e,\"a\",function(){return s}),n.d(e,\"b\",function(){return d});var a=n(\"t3Un\"),r=function(t){return Object(a.a)({url:\"/dict\",method:\"post\",data:t})},o=function(t){return Object(a.a)({url:\"/dict\",method:\"get\",params:t})},i=function(t){return Object(a.a)({url:\"/dict/getDictDetailList\",method:\"get\",params:t})},l=function(t){return Object(a.a)({url:\"/dict\",method:\"put\",data:t})},s=function(t){return Object(a.a)({url:\"/dict/\"+t,method:\"delete\"})},d=function(t){return Object(a.a)({url:\"/dict/delete/\",method:\"delete\",params:{name:t}})}},\"wk8/\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return r}),n.d(e,\"e\",function(){return o}),n.d(e,\"c\",function(){return i}),n.d(e,\"g\",function(){return l}),n.d(e,\"b\",function(){return s}),n.d(e,\"d\",function(){return d}),n.d(e,\"i\",function(){return u}),n.d(e,\"h\",function(){return c}),n.d(e,\"f\",function(){return m});var a=n(\"t3Un\");function r(t){return Object(a.a)({url:\"/user\",method:\"post\",data:t})}function o(t){return Object(a.a)({url:\"/user\",method:\"get\",params:t})}function i(t){return Object(a.a)({url:\"/user\",method:\"put\",data:t})}function l(t){return Object(a.a)({url:\"/user/\"+t,method:\"put\"})}function s(t){return Object(a.a)({url:\"/user/\"+t,method:\"delete\"})}function d(){return Object(a.a)({url:\"/user/info\",method:\"get\"})}function u(t){return Object(a.a)({url:\"/user/updatePass\",method:\"put\",params:t})}function c(t){return Object(a.a)({url:\"/user/updateEmail\",method:\"put\",params:t})}function m(t){return Object(a.a)({url:\"/user/sendMailCode\",method:\"post\",params:t})}}}]);","extractedComments":[]}