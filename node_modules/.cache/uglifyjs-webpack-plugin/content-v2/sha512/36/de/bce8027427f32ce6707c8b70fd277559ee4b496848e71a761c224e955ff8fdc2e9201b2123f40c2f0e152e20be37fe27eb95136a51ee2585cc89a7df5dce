{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-30e6\"],{\"44Km\":function(e,t,a){\"use strict\";a.r(t);var s=a(\"wk8/\"),r=axios.create({}),o={name:\"Index\",data:function(){var e=this;return{user:{username:\"\",phone:0,email:\"\",deptName:\"\",jobName:\"\",createTime:\"\"},activeName:\"first\",imageUrl:\"http://pic.52lhd.com/955136-20180802172143153-443159996.png\",passForm:{oldPass:\"\",newPass:\"\",checkPass:\"\"},rules:{oldPass:[{required:!0,message:\"原密码不能为空\",trigger:\"blur\"}],newPass:[{validator:function(t,a,s){\"\"===a?s(new Error(\"请输入密码\")):(\"\"!==e.passForm.checkPass&&e.$refs.passForm.validateField(\"checkPass\"),s())},trigger:\"blur\"}],checkPass:[{validator:function(t,a,s){\"\"===a?s(new Error(\"请再次输入密码\")):a!==e.passForm.newPass?s(new Error(\"两次输入密码不一致!\")):s()},trigger:\"blur\"}]},mailForm:{email:\"\",code:\"\",pass:\"\"},buttonName:\"发送验证码\",isDisabled:!1,codeLoading:!1,time:60}},created:function(){this.findUserInfo()},methods:{findUserInfo:function(){var e=this;Object(s.d)().then(function(t){e.user=t.data.data})},updatePass:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=new URLSearchParams;a.append(\"oldPass\",t.passForm.oldPass),a.append(\"newPass\",t.passForm.newPass),Object(s.i)(a).then(function(e){200===e.data.code?(t.$message({type:\"success\",message:\"操作成功\"}),t.activeName=\"second\",t.$refs.passForm.resetFields()):t.$message({type:\"error\",message:e.data.msg})})})},updateEmail:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=new URLSearchParams;a.append(\"mail\",t.mailForm.email),a.append(\"code\",t.mailForm.code),a.append(\"pass\",t.mailForm.pass),Object(s.h)(a).then(function(e){200===e.data.code?(t.$message({type:\"success\",message:\"操作成功\"}),t.activeName=\"third\",t.$refs.mailForm.resetFields()):t.$message({type:\"error\",message:e.data.msg})})})},sendCode:function(){var e=this;if(this.mailForm.email&&\"\"!==this.mailForm.email){this.codeLoading=!0,this.buttonName=\"验证码发送中\";var t=new URLSearchParams;t.append(\"to\",this.mailForm.email);var a=this;Object(s.f)(t).then(function(t){200===t.data.code&&(e.$message({showClose:!0,message:\"发送成功，验证码有效期5分钟\",type:\"success\"}),e.codeLoading=!1,e.isDisabled=!0,e.buttonName=e.time--+\"秒后重新发送\",e.timer=window.setInterval(function(){a.buttonName=a.time+\"秒后重新发送\",--a.time,a.time<0&&(a.buttonName=\"重新发送\",a.time=60,a.isDisabled=!1,window.clearInterval(a.timer))},1e3))}).catch(function(t){e.resetForm(),e.codeLoading=!1,console.log(t.data.message)})}},refresh:function(){var e=this;this.ico=\"el-icon-loading\",this.$refs.log.init(),setTimeout(function(){e.ico=\"el-icon-refresh\"},300)},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log(\"error submit!!\"),!1;alert(\"submit!\")})},resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},handleClick:function(e,t){console.log(e,t)},handleAvatarSuccess:function(e,t){var a=new FormData;a.append(\"token\",\"\"),a.append(\"file\",t[0]),r({method:\"POST\",url:\"http://up.qiniu.com\",data:a}).then(function(e){var t=e.data,a=t.base_url,s=t.path;self.previewAvatar=\"\"+a+s+\"?imageView2/1/w/154/h/154\",self.formData.avatar=\"\"+s}).catch(function(e){console.log(\"err\",e)})},beforeAvatarUpload:function(e){var t=\"image/jpeg\"===e.type,a=e.size/1024/1024<2;return t||this.$message.error(\"上传头像图片只能是 JPG 格式!\"),a||this.$message.error(\"上传头像图片大小不能超过 2MB!\"),t&&a}}},i=(a(\"jOMV\"),a(\"KHd+\")),n=Object(i.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"el-tabs\",{on:{\"tab-click\":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:\"activeName\"}},[a(\"el-tab-pane\",{attrs:{label:\"个人信息\",name:\"first\"}},[a(\"div\",{staticClass:\"user\",staticStyle:{width:\"600px\"}},[a(\"el-form\",{ref:\"form\",attrs:{model:e.user,\"label-width\":\"80px\"}},[a(\"el-form-item\",{attrs:{label:\"用户名\"}},[a(\"el-input\",{model:{value:e.user.username,callback:function(t){e.$set(e.user,\"username\",t)},expression:\"user.username\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"头像\"}},[a(\"el-upload\",{staticClass:\"avatar-uploader\",attrs:{action:\"https://jsonplaceholder.typicode.com/posts/\",\"show-file-list\":!1,\"on-success\":e.handleAvatarSuccess,\"before-upload\":e.beforeAvatarUpload}},[e.imageUrl?a(\"img\",{staticClass:\"avatar\",attrs:{src:e.imageUrl,alt:\"\"}}):a(\"i\",{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"手机号\"}},[a(\"el-input\",{model:{value:e.user.phone,callback:function(t){e.$set(e.user,\"phone\",t)},expression:\"user.phone\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"用户邮箱\"}},[a(\"el-input\",{attrs:{disabled:!0},model:{value:e.user.email,callback:function(t){e.$set(e.user,\"email\",t)},expression:\"user.email\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"所属部门\"}},[a(\"el-input\",{attrs:{disabled:!0},model:{value:e.user.deptName,callback:function(t){e.$set(e.user,\"deptName\",t)},expression:\"user.deptName\"}})],1),e._v(\" \"),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"}},[e._v(\"提交\")]),e._v(\" \"),a(\"el-button\",[e._v(\"取消\")])],1)],1)],1)]),e._v(\" \"),a(\"el-tab-pane\",{attrs:{label:\"修改密码\",name:\"second\"}},[a(\"div\",{staticStyle:{width:\"400px\"}},[a(\"el-form\",{ref:\"passForm\",staticClass:\"demo-ruleForm\",attrs:{model:e.passForm,\"status-icon\":\"\",rules:e.rules,\"label-width\":\"100px\"}},[a(\"el-form-item\",{attrs:{label:\"原密码\",prop:\"oldPass\"}},[a(\"el-input\",{attrs:{type:\"password\",autocomplete:\"off\"},model:{value:e.passForm.oldPass,callback:function(t){e.$set(e.passForm,\"oldPass\",t)},expression:\"passForm.oldPass\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"密码\",prop:\"newPass\"}},[a(\"el-input\",{attrs:{type:\"password\",autocomplete:\"off\"},model:{value:e.passForm.newPass,callback:function(t){e.$set(e.passForm,\"newPass\",t)},expression:\"passForm.newPass\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"确认密码\",prop:\"checkPass\"}},[a(\"el-input\",{attrs:{type:\"password\",autocomplete:\"off\"},model:{value:e.passForm.checkPass,callback:function(t){e.$set(e.passForm,\"checkPass\",t)},expression:\"passForm.checkPass\"}})],1),e._v(\" \"),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.updatePass(\"passForm\")}}},[e._v(\"修改\")]),e._v(\" \"),a(\"el-button\",{on:{click:function(t){e.resetForm(\"passForm\")}}},[e._v(\"重置\")])],1)],1)],1)]),e._v(\" \"),a(\"el-tab-pane\",{attrs:{label:\"修改邮箱\",name:\"third\"}},[a(\"div\",{staticStyle:{width:\"500px\"}},[a(\"el-form\",{ref:\"mailForm\",staticClass:\"demo-ruleForm\",attrs:{model:e.mailForm,\"label-width\":\"100px\"}},[a(\"el-form-item\",{attrs:{prop:\"email\",label:\"邮箱\",rules:[{required:!0,message:\"请输入邮箱地址\",trigger:\"blur\"},{type:\"email\",message:\"请输入正确的邮箱地址\",trigger:[\"blur\",\"change\"]}]}},[a(\"el-input\",{staticStyle:{width:\"250px\"},model:{value:e.mailForm.email,callback:function(t){e.$set(e.mailForm,\"email\",t)},expression:\"mailForm.email\"}}),e._v(\" \"),a(\"el-button\",{attrs:{loading:e.codeLoading,disabled:e.isDisabled},on:{click:e.sendCode}},[e._v(e._s(e.buttonName))])],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"验证码\",prop:\"code\",rules:[{required:!0,message:\"验证码不能为空\"}]}},[a(\"el-input\",{attrs:{type:\"age\",autocomplete:\"off\"},model:{value:e.mailForm.code,callback:function(t){e.$set(e.mailForm,\"code\",t)},expression:\"mailForm.code\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"密码\",prop:\"pass\",rules:[{required:!0,message:\"密码不能为空\"}]}},[a(\"el-input\",{attrs:{type:\"age\",autocomplete:\"off\"},model:{value:e.mailForm.pass,callback:function(t){e.$set(e.mailForm,\"pass\",t)},expression:\"mailForm.pass\"}})],1),e._v(\" \"),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.updateEmail(\"mailForm\")}}},[e._v(\"提交\")]),e._v(\" \"),a(\"el-button\",{on:{click:function(t){e.resetForm(\"mailForm\")}}},[e._v(\"重置\")])],1)],1)],1)])],1)],1)},[],!1,null,null,null);n.options.__file=\"index.vue\";t.default=n.exports},SaIP:function(e,t,a){},jOMV:function(e,t,a){\"use strict\";var s=a(\"SaIP\");a.n(s).a},\"wk8/\":function(e,t,a){\"use strict\";a.d(t,\"a\",function(){return r}),a.d(t,\"e\",function(){return o}),a.d(t,\"c\",function(){return i}),a.d(t,\"g\",function(){return n}),a.d(t,\"b\",function(){return l}),a.d(t,\"d\",function(){return m}),a.d(t,\"i\",function(){return c}),a.d(t,\"h\",function(){return u}),a.d(t,\"f\",function(){return d});var s=a(\"t3Un\");function r(e){return Object(s.a)({url:\"/user\",method:\"post\",data:e})}function o(e){return Object(s.a)({url:\"/user\",method:\"get\",params:e})}function i(e){return Object(s.a)({url:\"/user\",method:\"put\",data:e})}function n(e){return Object(s.a)({url:\"/user/\"+e,method:\"put\"})}function l(e){return Object(s.a)({url:\"/user/\"+e,method:\"delete\"})}function m(){return Object(s.a)({url:\"/user/info\",method:\"get\"})}function c(e){return Object(s.a)({url:\"/user/updatePass\",method:\"put\",params:e})}function u(e){return Object(s.a)({url:\"/user/updateEmail\",method:\"put\",params:e})}function d(e){return Object(s.a)({url:\"/user/sendMailCode\",method:\"post\",params:e})}}}]);","extractedComments":[]}